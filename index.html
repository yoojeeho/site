<script>
const BLOG = "https://ugho.tistory.com";

function getRandomInt(min, max) {
    min = Math.ceil(min);
    max = Math.floor(max);
    return Math.floor(Math.random() * (max - min)) + min;
  }

function getBlogPost() {
    const excluded = [47];
    const num = getRandomInt(34, 56);    
    const ret = excluded.includes(num) ? BLOG : `${BLOG}/${num}` ;

    return ret;
}
	
const url = new URL(window.location.href);
const version = url.searchParams.get("version");

console.log("Requested version: " + version);

switch(version) {
	case 'test':
		const result = confirm('New update is waiting for you! Do you want to update the app?');
		if (result) location.href = "ms-windows-store://pdp/?ProductId=9NSPTMMF3NCD";
		break;
	case '':
	case null:
	case undefined:
		const getLanguage = () => navigator.userLanguage || (navigator.languages && navigator.languages.length && navigator.languages[0]) || navigator.language || navigator.browserLanguage || navigator.systemLanguage || 'en';
		const lang = getLanguage().toLowerCase();
		const isKo = ['ko', 'ko-kr', 'kr'].includes(lang);
		const adsForLang = 'https://yoojeeho.github.io/site/ads.html';//`https://yoojeeho.github.io/site/${isKo ? 'kor' : 'eng'}_ads.html`;
		
		location.href = adsForLang;//May need to be "https://yoojeeho.github.io" in best case!
		break;
	default:
		location.href = getBlogPost();
		break;
}

</script>
